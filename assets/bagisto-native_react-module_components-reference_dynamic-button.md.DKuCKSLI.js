import{j as i,c as a,b as t,ah as e}from"./chunks/framework.Br27zpCu.js";const c=JSON.parse('{"title":"DynamicButton","description":"","frontmatter":{},"headers":[],"relativePath":"bagisto-native/react-module/components-reference/dynamic-button.md","filePath":"bagisto-native/react-module/components-reference/dynamic-button.md","lastUpdated":1769089279000}'),n={name:"bagisto-native/react-module/components-reference/dynamic-button.md"};function l(h,s,p,r,k,d){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="dynamicbutton" tabindex="-1">DynamicButton <a class="header-anchor" href="#dynamicbutton" aria-label="Permalink to &quot;DynamicButton&quot;">​</a></h1><p>The <code>DynamicButton</code> component controls the native top navigation bar actions. It is context-aware and changes the available buttons based on the <code>pageType</code>.</p><h2 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-label="Permalink to &quot;Props&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Prop</th><th style="text-align:left;">Type</th><th style="text-align:left;">Default</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>pageType</code></td><td style="text-align:left;"><code>string</code></td><td style="text-align:left;"><code>&#39;home&#39;</code></td><td style="text-align:left;">The context for the native navbar: <code>&#39;home&#39;</code> or <code>&#39;product&#39;</code>.</td></tr><tr><td style="text-align:left;"><code>cartCountEvent</code></td><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;"><code>false</code></td><td style="text-align:left;">If true, enables the silent cart count sync mode.</td></tr><tr><td style="text-align:left;"><code>style</code></td><td style="text-align:left;"><code>object</code></td><td style="text-align:left;"><code>{ display: &#39;none&#39; }</code></td><td style="text-align:left;">Logic-only component, usually hidden.</td></tr></tbody></table><h2 id="feature-breakdown" tabindex="-1">Feature Breakdown <a class="header-anchor" href="#feature-breakdown" aria-label="Permalink to &quot;Feature Breakdown&quot;">​</a></h2><p>The <code>pageType</code> prop determines the native navbar buttons.</p><h3 id="_1-home-page-context-pagetype-home" tabindex="-1">1. Home Page Context (<code>pageType=&quot;home&quot;</code>) <a class="header-anchor" href="#_1-home-page-context-pagetype-home" aria-label="Permalink to &quot;1. Home Page Context (\`pageType=&quot;home&quot;\`)&quot;">​</a></h3><p>Enables icons for:</p><ul><li><strong>Image Search</strong>: Native object detection.</li><li><strong>QR/Barcode Scanner</strong>: Triggers scan; results in <code>turbo:next-search</code> event.</li><li><strong>Cart</strong>: Triggers <code>turbo:next-cart-modal</code> event.</li></ul><h3 id="_2-product-page-context-pagetype-product" tabindex="-1">2. Product Page Context (<code>pageType=&quot;product&quot;</code>) <a class="header-anchor" href="#_2-product-page-context-pagetype-product" aria-label="Permalink to &quot;2. Product Page Context (\`pageType=&quot;product&quot;\`)&quot;">​</a></h3><p>Enables icons for:</p><ul><li><strong>Share</strong>: Opens native share sheet.</li><li><strong>Cart</strong>: Triggers <code>turbo:next-cart-modal</code> event.</li></ul><hr><h2 id="event-handling-in-react" tabindex="-1">Event Handling in React <a class="header-anchor" href="#event-handling-in-react" aria-label="Permalink to &quot;Event Handling in React&quot;">​</a></h2><p>To respond to native actions (like a scan result or a cart tap), use <code>useEffect</code> to attach listeners.</p><h3 id="handling-search-scan-results" tabindex="-1">Handling Search/Scan Results <a class="header-anchor" href="#handling-search-scan-results" aria-label="Permalink to &quot;Handling Search/Scan Results&quot;">​</a></h3><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleScan</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> customEvent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }&gt;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customEvent.detail.query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customEvent.detail.code;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    router.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/search?q=\${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encodeURIComponent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;turbo:next-search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleScan);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;turbo:next-search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleScan);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, []);</span></span></code></pre></div><h3 id="handling-cart-clicks" tabindex="-1">Handling Cart Clicks <a class="header-anchor" href="#handling-cart-clicks" aria-label="Permalink to &quot;Handling Cart Clicks&quot;">​</a></h3><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleOpenCart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Logic to open cart drawer or navigate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setCartOpen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;turbo:next-cart-modal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleOpenCart);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;turbo:next-cart-modal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleOpenCart);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, []);</span></span></code></pre></div><hr><h2 id="syncing-cart-count" tabindex="-1">Syncing Cart Count <a class="header-anchor" href="#syncing-cart-count" aria-label="Permalink to &quot;Syncing Cart Count&quot;">​</a></h2><p>The <code>DynamicButton</code> component also handles background cart count synchronization if <code>cartCountEvent={true}</code> is set. However, for manual or initial sync, use the <code>triggerCartCountValue</code> utility from <code>@bagisto-native/core</code>.</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { triggerCartCountValue } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@bagisto-native/core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Inside your component or hook</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (cartCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    triggerCartCountValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cartCount);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, [cartCount]);</span></span></code></pre></div><hr><h2 id="ready-event-race-conditions" tabindex="-1">Ready Event &amp; Race Conditions <a class="header-anchor" href="#ready-event-race-conditions" aria-label="Permalink to &quot;Ready Event &amp; Race Conditions&quot;">​</a></h2><p>To ensure the bridge is ready before sending data (especially during the first page load), listen for the ready event.</p><table tabindex="0"><thead><tr><th style="text-align:left;">Event Name</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>bagisto-native:dynamic-button-ready</code></td><td style="text-align:left;">Emitted when the bridge element is fully connected.</td></tr></tbody></table><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bagisto-native:dynamic-button-ready&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Safe to sync cart or trigger native actions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li>Explore <a href="./hotwire-toast">HotwireToast</a></li><li>Learn about <a href="./hotwire-search">HotwireSearch</a></li><li>Understand <a href="./../common-integration-patterns/app-level-providers">Common Integration Patterns</a></li></ul>`,30)])])}const g=i(n,[["render",l]]);export{c as __pageData,g as default};
