import{j as a,c as t,b as e,ah as i}from"./chunks/framework.Br27zpCu.js";const k=JSON.parse('{"title":"GraphQL Operations: Queries, Mutations & Fragments","description":"","frontmatter":{},"headers":[],"relativePath":"bagisto-headless-ecommerce/graphql-schema/operations.md","filePath":"bagisto-headless-ecommerce/graphql-schema/operations.md","lastUpdated":1768400804000}'),n={name:"bagisto-headless-ecommerce/graphql-schema/operations.md"};function l(r,s,p,o,h,d){return e(),t("div",null,[...s[0]||(s[0]=[i(`<h1 id="graphql-operations-queries-mutations-fragments" tabindex="-1">GraphQL Operations: Queries, Mutations &amp; Fragments <a class="header-anchor" href="#graphql-operations-queries-mutations-fragments" aria-label="Permalink to &quot;GraphQL Operations: Queries, Mutations &amp; Fragments&quot;">â€‹</a></h1><p>This guide provides a comprehensive reference for working with GraphQL operations in the Bagisto Headless project. We group operations into three categories to ensure modularity, reusability, and optimal performance.</p><h2 id="_1-fragments-reusable-fields" tabindex="-1">1. Fragments (Reusable Fields) <a class="header-anchor" href="#_1-fragments-reusable-fields" aria-label="Permalink to &quot;1. Fragments (Reusable Fields)&quot;">â€‹</a></h2><p>Fragments allow you to define common field sets for core entities like Products, Cart Items, or Categories. This ensures UI consistency and reduces query maintenance.</p><h3 id="key-fragments-catalog-domain" tabindex="-1">Key Fragments (Catalog Domain) <a class="header-anchor" href="#key-fragments-catalog-domain" aria-label="Permalink to &quot;Key Fragments (Catalog Domain)&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">Fragment</th><th style="text-align:left;">Primary Use</th><th style="text-align:left;">Core Fields</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>ProductCore</code></strong></td><td style="text-align:left;">Grids &amp; Search</td><td style="text-align:left;">ID, SKU, Name, Price, UrlKey, BaseImageUrl.</td></tr><tr><td style="text-align:left;"><strong><code>ProductDetailed</code></strong></td><td style="text-align:left;">Product Pages</td><td style="text-align:left;"><code>ProductCore</code> + Description, Variants, Reviews.</td></tr><tr><td style="text-align:left;"><strong><code>ProductReview</code></strong></td><td style="text-align:left;">Review Sections</td><td style="text-align:left;">Rating, Title, Comment, Customer Name.</td></tr></tbody></table><h3 id="implementation-pattern" tabindex="-1">Implementation Pattern <a class="header-anchor" href="#implementation-pattern" aria-label="Permalink to &quot;Implementation Pattern&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/graphql/catelog/fragments/Product.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PRODUCT_CORE_FRAGMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  fragment ProductCore on Product {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    id</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    sku</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    name</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    price</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    urlKey</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    baseImageUrl</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="_2-queries-data-fetching" tabindex="-1">2. Queries (Data Fetching) <a class="header-anchor" href="#_2-queries-data-fetching" aria-label="Permalink to &quot;2. Queries (Data Fetching)&quot;">â€‹</a></h2><p>Queries are used for read-only operations. In this project, most queries are executed on the server using the <code>graphqlRequest</code> utility.</p><h3 id="standard-query-example" tabindex="-1">Standard Query Example <a class="header-anchor" href="#standard-query-example" aria-label="Permalink to &quot;Standard Query Example&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/graphql/catelog/queries/Product.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { PRODUCT_CORE_FRAGMENT } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../fragments/Product&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> GET_HOME_PRODUCTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  query GetHomeProducts($first: Int) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    products(first: $first) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      edges {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        node {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          ...ProductCore</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PRODUCT_CORE_FRAGMENT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="best-practices-for-queries" tabindex="-1">Best Practices for Queries <a class="header-anchor" href="#best-practices-for-queries" aria-label="Permalink to &quot;Best Practices for Queries&quot;">â€‹</a></h3><ul><li><strong>Modularize with Fragments:</strong> Always use fragments for shared entities.</li><li><strong>Relay Pagination:</strong> Most listings use <code>edges</code>, <code>node</code>, and <code>pageInfo</code>.</li><li><strong>Server-Side Execution:</strong> Prefer using <code>graphqlRequest</code> in Server Components for SEO and speed.</li></ul><h2 id="_3-mutations-data-modification" tabindex="-1">3. Mutations (Data Modification) <a class="header-anchor" href="#_3-mutations-data-modification" aria-label="Permalink to &quot;3. Mutations (Data Modification)&quot;">â€‹</a></h2><p>Mutations are used to create, update, or delete data (e.g., adding to cart, placing orders, or logging in).</p><h3 id="mutation-example-add-to-cart" tabindex="-1">Mutation Example: Add to Cart <a class="header-anchor" href="#mutation-example-add-to-cart" aria-label="Permalink to &quot;Mutation Example: Add to Cart&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/graphql/cart/mutations/AddProductToCart.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CREATE_ADD_PRODUCT_IN_CART</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  mutation CreateAddProductInCart($productId: Int!, $quantity: Int!) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    createAddProductInCart(input: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      productId: $productId</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      quantity: $quantity</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      addProductInCart {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        id</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        cartToken</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        grandTotal</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        itemsCount</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        success</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="best-practices-for-mutations" tabindex="-1">Best Practices for Mutations <a class="header-anchor" href="#best-practices-for-mutations" aria-label="Permalink to &quot;Best Practices for Mutations&quot;">â€‹</a></h3><ul><li><strong>Return Status:</strong> Always request <code>success</code> and <code>message</code> fields to handle UI feedback.</li><li><strong>Cache Invalidation:</strong> After a successful mutation, remember to call <code>revalidateTag()</code> or <code>revalidatePath()</code> to refresh the UI.</li><li><strong>Error Handling:</strong> Use try-catch blocks in your components to capture network or GraphQL errors.</li></ul><h2 id="_4-summary-decision-matrix" tabindex="-1">4. Summary Decision Matrix <a class="header-anchor" href="#_4-summary-decision-matrix" aria-label="Permalink to &quot;4. Summary Decision Matrix&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Operation Type</th><th style="text-align:left;">When to Use</th><th style="text-align:left;">Result Storage</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Fragment</strong></td><td style="text-align:left;">When fields are shared across &gt;1 component.</td><td style="text-align:left;">Inline in other operations.</td></tr><tr><td style="text-align:left;"><strong>Query</strong></td><td style="text-align:left;">When fetching data for display.</td><td style="text-align:left;">Next.js Data Cache / Apollo Cache.</td></tr><tr><td style="text-align:left;"><strong>Mutation</strong></td><td style="text-align:left;">When the user performs an action (Write).</td><td style="text-align:left;">Uncached (Immediate UI feedback).</td></tr></tbody></table><p>ðŸ“– <strong>Related Documentation:</strong></p><ul><li><a href="/bagisto-headless-ecommerce/apollo-client/request-utility">GraphQL Request Utility</a></li><li><a href="/bagisto-headless-ecommerce/apollo-client/cache-options">Cache Options &amp; Configuration</a></li><li><a href="/bagisto-headless-ecommerce/graphql-schema/overview">Understanding the Schema</a></li></ul>`,24)])])}const g=a(n,[["render",l]]);export{k as __pageData,g as default};
