import{j as i,c as a,b as e,ah as n}from"./chunks/framework.Br27zpCu.js";const g=JSON.parse('{"title":"GraphQL Queries","description":"","frontmatter":{},"headers":[],"relativePath":"bagisto-headless-ecommerce/graphql-schema/graphql-operations/queries.md","filePath":"bagisto-headless-ecommerce/graphql-schema/graphql-operations/queries.md","lastUpdated":1768401425000}'),t={name:"bagisto-headless-ecommerce/graphql-schema/graphql-operations/queries.md"};function l(h,s,r,p,k,o){return e(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="graphql-queries" tabindex="-1">GraphQL Queries <a class="header-anchor" href="#graphql-queries" aria-label="Permalink to &quot;GraphQL Queries&quot;">‚Äã</a></h1><p>This guide explains how to write and use GraphQL queries in the Bagisto Headless storefront to fetch data from the backend.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">‚Äã</a></h2><p>Queries are used to fetch data from the GraphQL server. In Bagisto Headless, we use queries for retrieving product lists, category details, customer profiles, and more. All queries are written using the <code>gql</code> tag and are typically executed on the server side in Next.js App Router pages or components.</p><h2 id="_1-structure-of-a-query" tabindex="-1">1. Structure of a Query <a class="header-anchor" href="#_1-structure-of-a-query" aria-label="Permalink to &quot;1. Structure of a Query&quot;">‚Äã</a></h2><p>A typical query in the storefront consists of three main parts:</p><ol><li><strong>Operation Name:</strong> A unique name for the query (e.g., <code>GetProducts</code>).</li><li><strong>Variable Definitions:</strong> The dynamic inputs the query accepts (e.g., <code>$first</code>, <code>$query</code>).</li><li><strong>Selection Set:</strong> The specific fields and fragments you want to retrieve.</li></ol><h3 id="example-fetching-products" tabindex="-1">Example: Fetching Products <a class="header-anchor" href="#example-fetching-products" aria-label="Permalink to &quot;Example: Fetching Products&quot;">‚Äã</a></h3><p>The <code>GET_PRODUCTS</code> query demonstrates these components, including the use of fragments for field selection.</p><p><strong>File:</strong> <code>src/graphql/catelog/queries/Product.ts</code></p><div class="language-graphql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">graphql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">gql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> &quot;@apollo/client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PRODUCT_CORE_FRAGMENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> &quot;../fragments/Product&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GET_PRODUCTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  \${</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PRODUCT_CORE_FRAGMENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  query</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetProducts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    $query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    $sortKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    $reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Boolean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    $first</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    $channel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    products</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$query</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      sortKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$sortKey</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$reverse</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      first</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$first</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      channel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$channel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      totalCount</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      pageInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        hasNextPage</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        endCursor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      edges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          ...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ProductCore</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`;</span></span></code></pre></div><h2 id="_2-using-variables" tabindex="-1">2. Using Variables <a class="header-anchor" href="#_2-using-variables" aria-label="Permalink to &quot;2. Using Variables&quot;">‚Äã</a></h2><p>Variables allow you to make queries dynamic and reusable. In the example above, <code>$query</code>, <code>$sortKey</code>, and <code>$first</code> are variables.</p><p>When executing the query using our utility, you pass these variables in an object:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> graphqlRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProductsResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  GET_PRODUCTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    first: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    channel: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    query: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;shoes&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="_3-best-practices-for-queries" tabindex="-1">3. Best Practices for Queries <a class="header-anchor" href="#_3-best-practices-for-queries" aria-label="Permalink to &quot;3. Best Practices for Queries&quot;">‚Äã</a></h2><p>To maintain a clean and performant codebase, follow these best practices:</p><ul><li><strong>Use Descriptive Names:</strong> Always provide an operation name for your queries. This makes debugging easier in browser devtools and server logs.</li><li><strong>Request Only What You Need:</strong> GraphQL allows you to specify exactly which fields you want. Avoid selecting unnecessary fields to keep the payload size small.</li><li><strong>Leverage Fragments:</strong> Use fragments for shared field sets to ensure data consistency across different components.</li><li><strong>Handle Nullability:</strong> Be mindful of fields that might return <code>null</code> and handle those cases in your frontend components.</li><li><strong>Organize by Domain:</strong> Store queries in files named after the domain they belong to (e.g., <code>Product.ts</code>, <code>Category.ts</code>, <code>Cart.ts</code>).</li></ul><h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">‚Äã</a></h2><ul><li><strong>Declarative Data Fetching:</strong> Request exactly what you need.</li><li><strong>Type-Safe Variables:</strong> Pass dynamic inputs via variables for flexibility.</li><li><strong>Fragment Integration:</strong> Combine queries with fragments for consistent data structures.</li><li><strong>Domain-Driven Organization:</strong> Queries are organized into domain-specific files within <code>src/graphql/</code>.</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">‚Äã</a></h2><ul><li>üó≥Ô∏è <a href="/bagisto-headless-ecommerce/graphql-schema/graphql-operations/mutations">Mutations</a> - Learn how to modify data on the server.</li><li>üß± <a href="/bagisto-headless-ecommerce/graphql-schema/graphql-operations/fragments">Fragments</a> - Deep dive into reusable field sets.</li></ul>`,22)])])}const E=i(t,[["render",l]]);export{g as __pageData,E as default};
