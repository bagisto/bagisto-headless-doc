import{j as a,c as i,b as t,ah as e}from"./chunks/framework.Br27zpCu.js";const k=JSON.parse('{"title":"GraphQL Mutations","description":"","frontmatter":{},"headers":[],"relativePath":"bagisto-headless-ecommerce/graphql-schema/graphql-operations/mutations.md","filePath":"bagisto-headless-ecommerce/graphql-schema/graphql-operations/mutations.md","lastUpdated":1769095842000}'),n={name:"bagisto-headless-ecommerce/graphql-schema/graphql-operations/mutations.md"};function r(l,s,h,p,o,d){return t(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="graphql-mutations" tabindex="-1">GraphQL Mutations <a class="header-anchor" href="#graphql-mutations" aria-label="Permalink to &quot;GraphQL Mutations&quot;">‚Äã</a></h1><p>This guide explains how to use GraphQL mutations in the Bagisto Headless storefront to modify data, such as managing the shopping cart, customer profiles, and placing orders.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">‚Äã</a></h2><p>While queries are used for fetching data, <strong>mutations</strong> are used to perform write operations that change data on the server. In Bagisto Headless, mutations are essential for core e-commerce interactions like adding products to the cart, updating customer addresses, and completing the checkout process.</p><h2 id="_1-structure-of-a-mutation" tabindex="-1">1. Structure of a Mutation <a class="header-anchor" href="#_1-structure-of-a-mutation" aria-label="Permalink to &quot;1. Structure of a Mutation&quot;">‚Äã</a></h2><p>A mutation structure is similar to a query but starts with the <code>mutation</code> keyword. It typically takes an <code>input</code> object containing the data to be processed and returns the updated state of the affected entity.</p><h3 id="example-adding-product-to-cart" tabindex="-1">Example: Adding Product to Cart <a class="header-anchor" href="#example-adding-product-to-cart" aria-label="Permalink to &quot;Example: Adding Product to Cart&quot;">‚Äã</a></h3><p>The <code>CREATE_ADD_PRODUCT_IN_CART</code> mutation demonstrates how input variables are used and what kind of data is returned upon success.</p><p><strong>File:</strong> <code>src/graphql/cart/mutations/AddProductToCart.ts</code></p><div class="language-graphql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">graphql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">mutation</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreateAddProductInCart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  $token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  $cartId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  $productId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  $quantity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  createAddProductInCart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$token</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      cartId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$cartId</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      productId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$productId</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      quantity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$quantity</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    addProductInCart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      id</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      cartToken</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      itemsCount</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      grandTotal</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      success</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      message</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_2-executing-mutations" tabindex="-1">2. Executing Mutations <a class="header-anchor" href="#_2-executing-mutations" aria-label="Permalink to &quot;2. Executing Mutations&quot;">‚Äã</a></h2><p>Mutations are typically executed through API routes or client-side actions. Unlike queries, mutations should never be cached, so we use <code>cache: &quot;no-store&quot;</code> or <code>noCache: true</code> options.</p><h3 id="server-side-implementation-api-route" tabindex="-1">Server-Side Implementation (API Route) <a class="header-anchor" href="#server-side-implementation-api-route" aria-label="Permalink to &quot;Server-Side Implementation (API Route)&quot;">‚Äã</a></h3><p>In an API route, you can use <code>bagistoFetch</code> to execute the mutation.</p><p><strong>File:</strong> <code>src/app/api/cart/addToCart/route.ts</code></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bagistoFetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddToCartOperation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  query: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CREATE_ADD_PRODUCT_IN_CART</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  variables: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    productId: body.productId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    quantity: body.quantity,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... other variables</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  cache: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no-store&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="_3-best-practices-for-mutations" tabindex="-1">3. Best Practices for Mutations <a class="header-anchor" href="#_3-best-practices-for-mutations" aria-label="Permalink to &quot;3. Best Practices for Mutations&quot;">‚Äã</a></h2><p>To ensure a reliable and secure experience when modifying data:</p><ul><li><strong>Input Validation:</strong> Always validate data on the client side before sending the mutation to provide immediate feedback and reduce server load.</li><li><strong>Error Handling:</strong> Mutations often return a <code>success</code> flag and a <code>message</code>. Check these fields in your response to handle business logic errors gracefully.</li><li><strong>Cache Invalidation:</strong> After a successful mutation, you may need to invalidate specific cache tags to ensure the UI reflects the updated data.</li><li><strong>Strong Typing:</strong> Use TypeScript interfaces for mutation inputs and responses to prevent runtime errors and improve developer productivity.</li><li><strong>Client-Side Feedback:</strong> Use loading states to notify users that an operation is in progress, preventing double submissions.</li></ul><h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">‚Äã</a></h2><ul><li><strong>Write Operations:</strong> Used for any action that changes state on the server.</li><li><strong>Input Objects:</strong> Pass structured data to the backend via variables.</li><li><strong>No Caching:</strong> Always execute mutations with caching disabled to ensure data integrity.</li><li><strong>Comprehensive Responses:</strong> Request fields that allow you to update the local UI state immediately after the mutation succeeds.</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">‚Äã</a></h2><ul><li>üì¶ <a href="/bagisto-headless-ecommerce/features/cart/state-management/redux-integration">Cart Operations</a> - Specific mutations for cart management.</li><li>üîê <a href="/bagisto-headless-ecommerce/authentication/customer-auth">Customer Authentication</a> - Mutations for login and registration.</li></ul>`,23)])])}const u=a(n,[["render",r]]);export{k as __pageData,u as default};
