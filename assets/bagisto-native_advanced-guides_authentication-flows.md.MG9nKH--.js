import{j as i,c as e,b as a,ah as t}from"./chunks/framework.Br27zpCu.js";const k=JSON.parse('{"title":"Authentication Flows","description":"","frontmatter":{},"headers":[],"relativePath":"bagisto-native/advanced-guides/authentication-flows.md","filePath":"bagisto-native/advanced-guides/authentication-flows.md","lastUpdated":1769173076000}'),n={name:"bagisto-native/advanced-guides/authentication-flows.md"};function o(l,s,r,h,p,d){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="authentication-flows" tabindex="-1">Authentication Flows <a class="header-anchor" href="#authentication-flows" aria-label="Permalink to &quot;Authentication Flows&quot;">​</a></h1><p>Handling authentication in a hybrid app involves synchronizing the session state between the WebView (Cookies/LocalStorage) and the Native App.</p><h2 id="cookie-based-session-standard" tabindex="-1">Cookie-Based Session (Standard) <a class="header-anchor" href="#cookie-based-session-standard" aria-label="Permalink to &quot;Cookie-Based Session (Standard)&quot;">​</a></h2><p>By default, <strong>Bagisto Native</strong> relies on <strong>HttpOnly Cookies</strong> for authentication. This is the recommended approach as it requires no manual bridge configuration.</p><ol><li><strong>Login</strong>: User logs in via the WebView form. The server sets a <code>session_id</code> cookie.</li><li><strong>Persistence</strong>: The Native App&#39;s <code>WebView</code> shares the cookie storage with the OS (to some extent) or persists it across app launches.</li><li><strong>API Calls</strong>: Subsequent requests from the WebView automatically include the cookie.</li></ol><h2 id="manual-token-based-sync-custom-extension" tabindex="-1">Manual Token-Based Sync (Custom Extension) <a class="header-anchor" href="#manual-token-based-sync-custom-extension" aria-label="Permalink to &quot;Manual Token-Based Sync (Custom Extension)&quot;">​</a></h2><p>If your native app needs to make direct API calls (e.g., for native widgets or background updates), you might need to sync the API token.</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>Token synchronization is not a built-in feature of Bagisto Native. Developers must implement a custom bridge component for this purpose if required.</p></div><p><strong>Synchronizing Token after Login:</strong></p><ol><li><strong>Web</strong>: After a successful login, use a Bridge Component to send the token to Native.</li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// In your Login Helper</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    event: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    token: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;extracted_api_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user: { id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, email: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><ol start="2"><li><strong>Native</strong>: The app receives the token and stores it in the KeyChain (iOS) or Keystore (Android).</li></ol><h2 id="handling-logout" tabindex="-1">Handling Logout <a class="header-anchor" href="#handling-logout" aria-label="Permalink to &quot;Handling Logout&quot;">​</a></h2><p>When the user logs out from the web:</p><ol><li>Clear Cookies/LocalStorage.</li><li><strong>Trigger Native Logout via Bridge</strong>:<div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { event: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div></li><li><strong>Native</strong>: Clears the stored token and resets any native UI (e.g., remove &quot;My Profile&quot; tab badge).</li></ol><h2 id="session-expiry" tabindex="-1">Session Expiry <a class="header-anchor" href="#session-expiry" aria-label="Permalink to &quot;Session Expiry&quot;">​</a></h2><p>If the backend session expires (401 Unauthorized):</p><ol><li>The Web app should redirect to <code>/login</code>.</li><li>Turbo Native follows this redirect.</li><li><strong>UX Tip</strong>: To avoid a jarring full-page login appearing inside a nested flow, consider checking for 401s in your native networking delegate and prompting a native login modal (advanced) or simply ensuring the login page is responsive.</li></ol><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li>Learn about <a href="./analytics-tracking">Analytics &amp; Tracking</a></li><li>Understand <a href="./checkout-edge-cases">Checkout Edge Cases</a></li><li>Explore <a href="./custom-bridge-components">Custom Bridge Components</a></li></ul>`,20)])])}const g=i(n,[["render",o]]);export{k as __pageData,g as default};
