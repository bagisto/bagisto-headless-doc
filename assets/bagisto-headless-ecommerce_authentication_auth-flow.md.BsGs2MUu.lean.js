import{j as h,E as c,c as p,b as i,q as t,h as n,ah as r,f as a,w as s,I as l,ai as d}from"./chunks/framework.Br27zpCu.js";const y=JSON.parse('{"title":"Authentication Flow","description":"","frontmatter":{},"headers":[],"relativePath":"bagisto-headless-ecommerce/authentication/auth-flow.md","filePath":"bagisto-headless-ecommerce/authentication/auth-flow.md","lastUpdated":1769093839000}'),u={name:"bagisto-headless-ecommerce/authentication/auth-flow.md"};function g(m,e,k,f,A,b){const o=c("Mermaid");return i(),p("div",null,[e[2]||(e[2]=t("h1",{id:"authentication-flow",tabindex:"-1"},[a("Authentication Flow "),t("a",{class:"header-anchor",href:"#authentication-flow","aria-label":'Permalink to "Authentication Flow"'},"​")],-1)),e[3]||(e[3]=t("p",null,"This document provides a sequential breakdown of the authentication lifecycle in the Bagisto Headless project. It covers how a user transitions from an anonymous state to an authenticated one and how sessions are maintained across requests.",-1)),e[4]||(e[4]=t("h2",{id:"_3-1-scenario-customer-login-flow",tabindex:"-1"},[a("3.1 Scenario: Customer Login Flow "),t("a",{class:"header-anchor",href:"#_3-1-scenario-customer-login-flow","aria-label":'Permalink to "3.1 Scenario: Customer Login Flow"'},"​")],-1)),e[5]||(e[5]=t("p",null,"The following flow describes the journey from the Login Page to an authenticated Account Dashbaord.",-1)),(i(),n(d,null,{default:s(()=>[l(o,{id:"mermaid-12",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20Start(%5BUser%20on%20%2Fcustomer%2Flogin%5D)%20--%3E%20Input%5BEnters%20Email%20%26%20Password%5D%0A%20%20%20%20Input%20--%3E%20Trigger%5B%22signIn('credentials'%2C%20...%20)%22%5D%0A%20%20%20%20Trigger%20--%3E%20Authorize%7B%7B%22Authorize%20Function%20(utils%2Fauth.ts)%22%7D%7D%0A%20%20%20%20Authorize%20--%3E%20GQL%5B%22Mutation%3A%20CUSTOMER_LOGIN%22%5D%0A%20%20%20%20GQL%20--%3E%20Bagisto(%5B%22Bagisto%20Backend%22%5D)%0A%20%20%20%20Bagisto%20--%20Valid%20Credentials%20--%3E%20Success%5BReturn%20apiToken%20%26%20accessToken%5D%0A%20%20%20%20Success%20--%3E%20Callback%5B%22jwt()%20%26%20session()%20Callbacks%22%5D%0A%20%20%20%20Callback%20--%3E%20Persist%5BEncrypted%20Cookie%20Saved%5D%0A%20%20%20%20Persist%20--%3E%20Redirect(%5BRedirect%20to%20%2Fcustomer%2Faccount%5D)%0A%20%20%20%20%0A%20%20%20%20Bagisto%20--%20Invalid%20Credentials%20--%3E%20Error%5BShow%20Error%20Message%5D%0A%20%20%20%20Error%20--%3E%20Start%0A"})]),fallback:s(()=>[...e[0]||(e[0]=[a(" Loading... ",-1)])]),_:1})),e[6]||(e[6]=r("",14)),(i(),n(d,null,{default:s(()=>[l(o,{id:"mermaid-123",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20UI%20as%20React%20Component%0A%20%20%20%20participant%20Link%20as%20Apollo%20Auth%20Link%0A%20%20%20%20participant%20API%20as%20Bagisto%20GraphQL%0A%20%20%20%20%0A%20%20%20%20UI-%3E%3ELink%3A%20useQuery(GET_PROFILE)%0A%20%20%20%20Link-%3E%3ELink%3A%20Get%20token%20from%20Session%0A%20%20%20%20Link-%3E%3EAPI%3A%20POST%20%2Fgraphql%20%7B%20Authorization%3A%20Bearer%20...%20%7D%0A%20%20%20%20API--%3E%3EUI%3A%20Return%20Profile%20Data%0A"})]),fallback:s(()=>[...e[1]||(e[1]=[a(" Loading... ",-1)])]),_:1})),e[7]||(e[7]=r("",5))])}const v=h(u,[["render",g]]);export{y as __pageData,v as default};
