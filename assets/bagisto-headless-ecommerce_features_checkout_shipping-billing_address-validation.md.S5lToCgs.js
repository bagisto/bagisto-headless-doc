import{j as s,c as a,b as e,ah as t}from"./chunks/framework.Br27zpCu.js";const c=JSON.parse('{"title":"Address Validation","description":"","frontmatter":{},"headers":[],"relativePath":"bagisto-headless-ecommerce/features/checkout/shipping-billing/address-validation.md","filePath":"bagisto-headless-ecommerce/features/checkout/shipping-billing/address-validation.md","lastUpdated":1768234161000}'),n={name:"bagisto-headless-ecommerce/features/checkout/shipping-billing/address-validation.md"};function l(r,i,o,h,d,p){return e(),a("div",null,[...i[0]||(i[0]=[t(`<h1 id="address-validation" tabindex="-1">Address Validation <a class="header-anchor" href="#address-validation" aria-label="Permalink to &quot;Address Validation&quot;">‚Äã</a></h1><p>This guide explains the multi-layered validation logic used to ensure high-quality address data during the checkout process in the Bagisto Headless storefront.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">‚Äã</a></h2><p>Address validation ensures that orders are only placed with reachable and accurate delivery information. The storefront implements validation at the <strong>Input</strong>, <strong>Form</strong>, and <strong>API</strong> levels to provide a seamless user experience while maintaining data integrity.</p><h2 id="_1-input-level-validation" tabindex="-1">1. Input-Level Validation <a class="header-anchor" href="#_1-input-level-validation" aria-label="Permalink to &quot;1. Input-Level Validation&quot;">‚Äã</a></h2><p>Individual fields are validated as the user types or moves between inputs using <strong>React Hook Form</strong> rules.</p><h3 id="required-fields" tabindex="-1">Required Fields <a class="header-anchor" href="#required-fields" aria-label="Permalink to &quot;Required Fields&quot;">‚Äã</a></h3><p>Critical fields like first name, last name, street address, city, postcode, and phone number are marked as required. If a user attempts to submit the form without these, the UI immediately displays a &quot;Required&quot; error message.</p><p><strong>File:</strong> <code>src/components/checkout/stepper/GuestAddAdressForm.tsx</code></p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;billing.firstName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  required: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;First name is required&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})}</span></span></code></pre></div><h3 id="format-validation" tabindex="-1">Format Validation <a class="header-anchor" href="#format-validation" aria-label="Permalink to &quot;Format Validation&quot;">‚Äã</a></h3><p>Certain fields require specific formats:</p><ul><li><strong>Email:</strong> Validated against a standard email regex pattern.</li><li><strong>Phone Number:</strong> Validated using a regex (<code>/^[\\d\\s\\-\\+\\(\\)]+$/</code>) and a custom validator to ensure a minimum of 10 digits after stripping non-numeric characters.</li></ul><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cleaned</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cleaned.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Phone must be at least 10 digits&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_2-dynamic-field-validation" tabindex="-1">2. Dynamic Field Validation <a class="header-anchor" href="#_2-dynamic-field-validation" aria-label="Permalink to &quot;2. Dynamic Field Validation&quot;">‚Äã</a></h2><p>The storefront dynamically changes validation requirements based on user interaction.</p><h3 id="same-for-shipping-toggle" tabindex="-1">&quot;Same for Shipping&quot; Toggle <a class="header-anchor" href="#same-for-shipping-toggle" aria-label="Permalink to &quot;&quot;Same for Shipping&quot; Toggle&quot;">‚Äã</a></h3><ul><li><strong>When Checked:</strong> Only the billing address fields are validated. The storefront internally clones these values for the shipping payload.</li><li><strong>When Unchecked:</strong> A whole new set of shipping fields becomes visible and carries its own independent validation rules, ensuring both addresses are fully vetted.</li></ul><h2 id="_3-server-side-validation" tabindex="-1">3. Server-Side Validation <a class="header-anchor" href="#_3-server-side-validation" aria-label="Permalink to &quot;3. Server-Side Validation&quot;">‚Äã</a></h2><p>Once the client-side checks pass, the address data is sent to the Bagisto GraphQL API via the <code>saveCheckoutAddress</code> mutation.</p><h3 id="backend-checks" tabindex="-1">Backend Checks <a class="header-anchor" href="#backend-checks" aria-label="Permalink to &quot;Backend Checks&quot;">‚Äã</a></h3><p>The Bagisto core performs advanced validation that the frontend cannot:</p><ul><li><strong>Country/State Matching:</strong> Ensures the provided state is valid for the selected country.</li><li><strong>Service Availability:</strong> Validates if any active shipping methods can deliver to the specified postcode/region.</li></ul><h3 id="handling-api-errors" tabindex="-1">Handling API Errors <a class="header-anchor" href="#handling-api-errors" aria-label="Permalink to &quot;Handling API Errors&quot;">‚Äã</a></h3><p>If the backend rejects the address (e.g., due to an invalid zip code format not caught by the frontend), the <code>useCheckout</code> hook intercepts the GraphQL error and displays it as a warning toast.</p><p><strong>File:</strong> <code>src/utils/hooks/useCheckout.ts</code></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(responseData)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Displays server-side validation error (e.g., &quot;Invalid shipping address&quot;)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    showToast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response?.error?.message, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;warning&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_4-ui-ux-feedback" tabindex="-1">4. UI/UX Feedback <a class="header-anchor" href="#_4-ui-ux-feedback" aria-label="Permalink to &quot;4. UI/UX Feedback&quot;">‚Äã</a></h2><ul><li><strong>Real-time Errors:</strong> Error messages appear instantly below inputs to guide the user.</li><li><strong>Visual Cues:</strong> Erroneous inputs are often highlighted or accompanied by alert icons (depending on the CSS implementation).</li><li><strong>Submission Guard:</strong> Submit buttons are disabled or show a loading state while address validation is pending on the server.</li></ul><h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">‚Äã</a></h2><ul><li><strong>Proactive Checks:</strong> Catches missing or poorly formatted data before an API call is made.</li><li><strong>Clean Data:</strong> Normalizes inputs (like phone numbers) to match backend expectations.</li><li><strong>Backend Authority:</strong> Relies on Bagisto for region-specific and business-rule validation.</li><li><strong>Transparent Communication:</strong> Uses toast notifications to relay complex server-side rejections to the user.</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">‚Äã</a></h2><ul><li>üè† <a href="/bagisto-headless-ecommerce/features/checkout/shipping-billing/address-management">Address Management</a> - Overview of the address system.</li><li>üí≥ <a href="/bagisto-headless-ecommerce/features/checkout/shipping-billing/billing-information">Billing Information</a> - Details on billing-specific data.</li><li>üß± <a href="/bagisto-headless-ecommerce/features/checkout/checkout-flow/checkout-validation">Checkout Validation</a> - Broader checkout-wide validation strategies.</li></ul>`,33)])])}const g=s(n,[["render",l]]);export{c as __pageData,g as default};
