import{j as i,c as a,b as n,ah as e}from"./chunks/framework.Br27zpCu.js";const o=JSON.parse('{"title":"GraphQL Fragments","description":"","frontmatter":{},"headers":[],"relativePath":"bagisto-headless-ecommerce/graphql-schema/graphql-operations/fragments.md","filePath":"bagisto-headless-ecommerce/graphql-schema/graphql-operations/fragments.md","lastUpdated":1768400907000}'),t={name:"bagisto-headless-ecommerce/graphql-schema/graphql-operations/fragments.md"};function l(h,s,p,r,k,d){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="graphql-fragments" tabindex="-1">GraphQL Fragments <a class="header-anchor" href="#graphql-fragments" aria-label="Permalink to &quot;GraphQL Fragments&quot;">‚Äã</a></h1><p>This guide explains how GraphQL fragments are used in the Bagisto Headless storefront to maintain consistency, reduce code duplication, and simplify complex queries.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">‚Äã</a></h2><p>Fragments are a key feature of GraphQL that allow you to define a set of fields that can be reused across multiple queries and mutations. In Bagisto Headless, we use fragments to define standard representations of core entities like Products, ensuring that different parts of the application always receive the same data structure for the same object type.</p><h2 id="_1-defining-fragments" tabindex="-1">1. Defining Fragments <a class="header-anchor" href="#_1-defining-fragments" aria-label="Permalink to &quot;1. Defining Fragments&quot;">‚Äã</a></h2><p>Fragments are typically defined in dedicated files within the <code>src/graphql</code> directory, organized by domain (e.g., catalog, cart).</p><h3 id="example-product-fragments" tabindex="-1">Example: Product Fragments <a class="header-anchor" href="#example-product-fragments" aria-label="Permalink to &quot;Example: Product Fragments&quot;">‚Äã</a></h3><p>We define several fragments for products depending on the required level of detail.</p><p><strong>File:</strong> <code>src/graphql/catelog/fragments/Product.ts</code></p><div class="language-graphql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">graphql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">gql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> &quot;@apollo/client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Core</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fields</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> needed</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> for</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> simple</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> product</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> displays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e.g., in a grid)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PRODUCT_CORE_FRAGMENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  fragment</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductCore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    id</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    sku</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    type</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    name</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    price</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    urlKey</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    baseImageUrl</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    minimumPrice</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    specialPrice</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Detailed</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fields</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> needed</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> for</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> the</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> product</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> detail</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> page</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PRODUCT_DETAILED_FRAGMENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  fragment</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductDetailed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ProductCore</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    description</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    shortDescription</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    variants</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      edges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">          id</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">          sku</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">          baseImageUrl</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    reviews</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      edges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          ...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ProductReview</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`;</span></span></code></pre></div><h2 id="_2-using-fragments-in-queries" tabindex="-1">2. Using Fragments in Queries <a class="header-anchor" href="#_2-using-fragments-in-queries" aria-label="Permalink to &quot;2. Using Fragments in Queries&quot;">‚Äã</a></h2><p>To use a fragment in a query, you must include the fragment definition in the <code>gql</code> template literal and use the spread operator (<code>...</code>) to inject the fields.</p><h3 id="example-fetching-products-with-fragments" tabindex="-1">Example: Fetching Products with Fragments <a class="header-anchor" href="#example-fetching-products-with-fragments" aria-label="Permalink to &quot;Example: Fetching Products with Fragments&quot;">‚Äã</a></h3><p>The <code>GET_PRODUCTS</code> query uses <code>PRODUCT_CORE_FRAGMENT</code> to fetch the necessary fields for each product in the list.</p><p><strong>File:</strong> <code>src/graphql/catelog/queries/Product.ts</code></p><div class="language-graphql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">graphql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">gql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> &quot;@apollo/client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PRODUCT_CORE_FRAGMENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> &quot;../fragments/Product&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GET_PRODUCTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  \${</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PRODUCT_CORE_FRAGMENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  query</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetProducts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$first</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$channel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    products</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">first</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$first</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">channel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$channel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      edges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          ...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ProductCore</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`;</span></span></code></pre></div><h2 id="_3-benefits-of-using-fragments" tabindex="-1">3. Benefits of Using Fragments <a class="header-anchor" href="#_3-benefits-of-using-fragments" aria-label="Permalink to &quot;3. Benefits of Using Fragments&quot;">‚Äã</a></h2><p>Using fragments in Bagisto Headless provides several advantages:</p><ul><li><strong>Single Source of Truth:</strong> If a field needs to be added or changed for a product across the entire site, you only need to update the fragment definition once.</li><li><strong>Improved Readability:</strong> Queries remain clean and focused on their purpose (fetching a list, fetching by ID) rather than being cluttered with long lists of fields.</li><li><strong>Type Safety:</strong> When combined with TypeScript, fragments help define consistent types for component props, ensuring that a component designed to display a &quot;core product&quot; always receives exactly those fields.</li><li><strong>Composable Queries:</strong> Fragments can be nested, allowing you to build complex data requirements from smaller, manageable pieces.</li></ul><h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">‚Äã</a></h2><ul><li><strong>Reusable Fields:</strong> Fragments define sets of fields for specific GraphQL types.</li><li><strong>Centralized Definition:</strong> Stored in <code>src/graphql/*/fragments/</code> for easy maintenance.</li><li><strong>Consistent Data:</strong> Ensures that all queries returning a specific type use the same field set.</li><li><strong>Clean Queries:</strong> Uses the spread operator to keep queries concise and readable.</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">‚Äã</a></h2><ul><li>üîç <a href="/bagisto-headless-ecommerce/graphql-schema/graphql-operations/queries">Queries</a> - How to use fragments in complex queries.</li><li>üìâ <a href="/bagisto-headless-ecommerce/graphql-schema/graphql-operations/mutations">Mutations</a> - Using fragments to handle mutation responses.</li></ul>`,23)])])}const E=i(t,[["render",l]]);export{o as __pageData,E as default};
